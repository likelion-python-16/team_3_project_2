{% load static %}
<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ê²°ì œ ê²°ê³¼ - ê³¨ëª©ìƒê¶Œ ë¹…ë°ì´í„° ë¶„ì„</title>
  <link rel="stylesheet" href="{% static 'css/styles.css' %}">
  <style>
    .result-hero {
      padding: 80px 0;
      text-align: center;
    }
    
    .result-hero.success {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      color: white;
    }
    
    .result-hero.error {
      background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
      color: white;
    }
    
    .result-icon {
      font-size: 64px;
      margin-bottom: 24px;
    }
    
    .result-card {
      max-width: 600px;
      margin: 40px auto;
      background: white;
      border-radius: 12px;
      padding: 40px;
      box-shadow: 0 4px 24px rgba(0, 0, 0, 0.1);
      text-align: center;
    }
    
    .payment-details {
      background: #f9fafb;
      border-radius: 8px;
      padding: 24px;
      margin: 24px 0;
      text-align: left;
    }
    
    .detail-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 12px;
      color: #374151;
    }
    
    .detail-row:last-child {
      margin-bottom: 0;
      font-weight: bold;
      border-top: 1px solid #e5e7eb;
      padding-top: 12px;
    }
    
    .btn-group {
      margin-top: 32px;
    }
    
    .btn-group .btn {
      margin: 0 8px;
    }
    
    .next-steps {
      background: #eff6ff;
      border-radius: 8px;
      padding: 24px;
      margin: 24px 0;
      text-align: left;
    }
    
    .next-steps h4 {
      margin: 0 0 16px 0;
      color: #1e40af;
    }
    
    .next-steps ul {
      margin: 0;
      padding-left: 20px;
      color: #374151;
    }
    
    .next-steps li {
      margin-bottom: 8px;
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="topbar">
    <div class="container topbar__row">
      <div class="logo">
        <a href="/" style="text-decoration: none; color: inherit;">
          <span>ğŸ§­</span>
          <span class="logo__title">ê³¨ëª©ìƒê¶Œ ë¹…ë°ì´í„° ë¶„ì„</span>
        </a>
      </div>
    </div>
  </header>

  <!-- Result Hero -->
  <section class="result-hero {% if success %}success{% else %}error{% endif %}">
    <div class="container">
      <div class="result-icon">
        {% if success %}âœ…{% else %}âŒ{% endif %}
      </div>
      <h1>
        {% if success %}
          ê²°ì œ ì™„ë£Œ!
        {% else %}
          ê²°ì œ ì‹¤íŒ¨
        {% endif %}
      </h1>
      <p>{{ message }}</p>
    </div>
  </section>

  <!-- Result Card -->
  <div class="container">
    <div class="result-card">
      
      {% if success %}
        <!-- ì„±ê³µ ì‹œ -->
        <h2>ğŸ‰ í”„ë¦¬ë¯¸ì—„ êµ¬ë…ì´ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤!</h2>
        
        {% if payment %}
        <div class="payment-details">
          <div class="detail-row">
            <span>ì£¼ë¬¸ë²ˆí˜¸</span>
            <span>{{ payment.order_id }}</span>
          </div>
          <div class="detail-row">
            <span>ê²°ì œì¼ì‹œ</span>
            <span>{{ payment.approved_at|date:"Yë…„ mì›” dì¼ H:i" }}</span>
          </div>
          <div class="detail-row">
            <span>êµ¬ë… í”Œëœ</span>
            <span>í”„ë¦¬ë¯¸ì—„ í”Œëœ ({{ payment.subscription_months }}ê°œì›”)</span>
          </div>
          <div class="detail-row">
            <span>ê²°ì œ ê¸ˆì•¡</span>
            <span>â‚©{{ payment.amount|floatformat:0 }}</span>
          </div>
        </div>
        {% endif %}
        
        <div class="next-steps">
          <h4>ğŸš€ ì´ì œ ì´ëŸ° ê²ƒë“¤ì„ í•  ìˆ˜ ìˆì–´ìš”!</h4>
          <ul>
            <li>ë¬´ì œí•œ ìƒê¶Œ ë¶„ì„ ì¡°íšŒ</li>
            <li>ìƒì„¸ ì§€ì—­ë³„ íˆ¬ì ë¶„ì„</li>
            <li>AI ê¸°ë°˜ íˆ¬ì ì¶”ì²œ</li>
            <li>ìœ„í—˜ë„ ë¶„ì„ ë° ì˜ˆì¸¡</li>
            <li>ì—‘ì…€/CSV ë°ì´í„° ë‚´ë³´ë‚´ê¸°</li>
            <li>ìš°ì„  ê³ ê° ì§€ì› ì„œë¹„ìŠ¤</li>
          </ul>
        </div>
        
        <div class="btn-group">
          <a href="/" class="btn btn--primary">ë¶„ì„ ì‹œì‘í•˜ê¸°</a>
          <a href="/account" class="btn btn--ghost">ë‚´ ê³„ì • ë³´ê¸°</a>
        </div>
        
      {% else %}
        <!-- ì‹¤íŒ¨ ì‹œ -->
        <h2>ê²°ì œê°€ ì™„ë£Œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤</h2>
        
        <div style="color: #6b7280; margin: 24px 0;">
          {% if code %}
            <p><strong>ì˜¤ë¥˜ ì½”ë“œ:</strong> {{ code }}</p>
          {% endif %}
          <p>ë¬¸ì œê°€ ì§€ì†ë˜ë©´ ê³ ê° ì§€ì›íŒ€ì— ë¬¸ì˜í•´ ì£¼ì„¸ìš”.</p>
        </div>
        
        <div class="btn-group">
          <a href="/payment?plan=premium" class="btn btn--primary">ë‹¤ì‹œ ì‹œë„</a>
          <a href="/account" class="btn btn--ghost">ë‚´ ê³„ì •</a>
          <a href="/" class="btn btn--ghost">í™ˆìœ¼ë¡œ</a>
        </div>
        
        <div style="margin-top: 32px; padding-top: 24px; border-top: 1px solid #e5e7eb; color: #6b7280; font-size: 14px;">
          <p>ğŸ’¡ <strong>ê²°ì œ ë¬¸ì œ í•´ê²° íŒ</strong></p>
          <ul style="text-align: left; color: #6b7280;">
            <li>ì¹´ë“œ í•œë„ ë˜ëŠ” ì”ì•¡ì„ í™•ì¸í•´ ì£¼ì„¸ìš”</li>
            <li>í•´ì™¸ ê²°ì œê°€ ì°¨ë‹¨ë˜ì–´ ìˆì§€ ì•Šì€ì§€ í™•ì¸í•´ ì£¼ì„¸ìš”</li>
            <li>ë‹¤ë¥¸ ê²°ì œ ìˆ˜ë‹¨ì„ ì‹œë„í•´ ë³´ì„¸ìš”</li>
            <li>ë¸Œë¼ìš°ì € ì¿ í‚¤ ë° ìºì‹œë¥¼ ì‚­ì œí•´ ë³´ì„¸ìš”</li>
          </ul>
        </div>
        
      {% endif %}
      
      <!-- ê³ ê° ì§€ì› -->
      <div style="margin-top: 40px; padding-top: 24px; border-top: 1px solid #e5e7eb; color: #6b7280; font-size: 14px;">
        <p>
          ğŸ§ ë„ì›€ì´ í•„ìš”í•˜ì‹œë‚˜ìš”? 
          <a href="mailto:support@cafe-analysis.com" style="color: #3b82f6;">support@cafe-analysis.com</a>
          ë˜ëŠ” 1588-1234ë¡œ ì—°ë½ì£¼ì„¸ìš”.
        </p>
      </div>
    </div>
  </div>

  <!-- Auto redirect for success -->
  {% if success %}
  <script>
    // 5ì´ˆ í›„ ìë™ìœ¼ë¡œ ëŒ€ì‹œë³´ë“œë¡œ ì´ë™
    setTimeout(function() {
      if (confirm('ëŒ€ì‹œë³´ë“œë¡œ ì´ë™í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        window.location.href = '/';
      }
    }, 5000);
  </script>
  {% endif %}
</body>
</html>